<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casa de Avivamiento y Reino Cerete</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Facebook SDK -->
    <meta property="og:url" content="https://www.facebook.com/casadeavivamientoyreinocerete">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Casa de Avivamiento y Reino Cerete">
    <meta property="og:description" content="Un lugar donde experimentarás el amor de Dios y encontrarás tu propósito en Cristo">
    <meta property="og:image" content="https://scontent.fclo9-1.fna.fbcdn.net/v/t39.30808-1/308508679_403324795297459_2966777305134579591_n.jpg">
    <meta property="fb:app_id" content="">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="img/logo/logo.PNG" alt="Casa de Avivamiento y Reino" class="logo-img">
                <span>Casa de Avivamiento y Reino</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#inicio" class="nav-link">Inicio</a>
                </li>
                <li class="nav-item">
                    <a href="#nosotros" class="nav-link">Nosotros</a>
                </li>
                <li class="nav-item">
                    <a href="#servicios" class="nav-link">Servicios</a>
                </li>
                <li class="nav-item">
                    <a href="#eventos" class="nav-link">Eventos</a>
                </li>
                <li class="nav-item">
                    <a href="#facebook" class="nav-link">Facebook</a>
                </li>

                <li class="nav-item">
                    <a href="#contacto" class="nav-link">Contacto</a>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Bienvenidos a Casa de Avivamiento y Reino</h1>
            <p class="hero-subtitle">Un lugar donde experimentarás el amor de Dios y encontrarás tu propósito en Cristo</p>
            <div class="hero-buttons">
                <a href="#servicios" class="btn btn-primary">Únete a Nosotros</a>
                <a href="https://www.facebook.com/casadeavivamientoyreinocerete" target="_blank" class="btn btn-secondary">
                    <i class="fab fa-facebook-f"></i> Síguenos en Facebook
                </a>
                <a href="#contacto" class="btn btn-secondary">Contáctanos</a>
            </div>
        </div>
        <div class="hero-image">
            <div class="hero-placeholder">
                <img src="img/logo/logo.PNG" alt="Casa de Avivamiento y Reino" class="hero-logo">
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="nosotros" class="about">
        <div class="container">
            <div class="section-header">
                <h2>Nuestra Misión</h2>
                <p>Transformando vidas a través del poder del Evangelio</p>
            </div>
            <div class="about-grid">
                <div class="about-card">
                    <div class="card-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h3>Amor</h3>
                    <p>Compartimos el amor incondicional de Cristo con nuestra comunidad</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">
                        <i class="fas fa-pray"></i>
                    </div>
                    <h3>Oración</h3>
                    <p>Creemos en el poder transformador de la oración y la adoración</p>
                </div>
                <div class="about-card">
                    <div class="card-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Comunidad</h3>
                    <p>Construimos una familia espiritual unida en fe y propósito</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="servicios" class="services">
        <div class="container">
            <div class="section-header">
                <h2>Nuestros Servicios</h2>
                <p>Espacios para crecer en fe y comunidad</p>
            </div>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-image">
                        <i class="fas fa-child"></i>
                    </div>
                    <div class="service-content">
                        <h3>Discipulado del Reino</h3>
                        <p>Formación espiritual profunda para el crecimiento en la fe</p>
                        <div class="service-time">
                            <i class="fas fa-clock"></i>
                            <span>Martes 7:00 PM</span>
                        </div>
                    </div>
                </div>
                <div class="service-card">
                    <div class="service-image">
                        <i class="fas fa-hands-praying"></i>
                    </div>
                    <div class="service-content">
                        <h3>Servicio General</h3>
                        <p>Tiempo de adoración, enseñanza y comunión fraternal</p>
                        <div class="service-time">
                            <i class="fas fa-clock"></i>
                            <span>Jueves 7:00 PM</span>
                        </div>
                    </div>
                </div>
                <div class="service-card">
                    <div class="service-image">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="service-content">
                        <h3>Reunión de Jóvenes</h3>
                        <p>Espacio especial para la juventud con adoración y enseñanza</p>
                        <div class="service-time">
                            <i class="fas fa-clock"></i>
                            <span>Sábado 7:00 PM</span>
                        </div>
                    </div>
                </div>
                <div class="service-card">
                    <div class="service-image">
                        <i class="fas fa-bible"></i>
                    </div>
                    <div class="service-content">
                        <h3>Culto Dominical</h3>
                        <p>Únete a nosotros cada domingo para adoración, predicación y comunión</p>
                        <div class="service-time">
                            <i class="fas fa-clock"></i>
                            <span>Domingo 8:00 AM</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section id="eventos" class="events">
        <div class="container">
            <div class="section-header">
                <h2>Próximos Eventos</h2>
                <p>No te pierdas nuestras actividades especiales</p>
            </div>
            <div class="events-grid">
                <div class="event-card">
                    <div class="event-date">
                        <span class="day">25</span>
                        <span class="month">AGO</span>
                    </div>
                    <div class="event-content">
                        <h3>Noche de Adoración</h3>
                        <div class="schedule-simple">
                            <div class="schedule-row">
                                <span class="day">Martes</span>
                                <span class="time">7:00 PM</span>
                            </div>
                            <div class="schedule-row">
                                <span class="day">Jueves</span>
                                <span class="time">7:00 PM</span>
                            </div>
                            <div class="schedule-row">
                                <span class="day">Sábados</span>
                                <span class="time">7:00 PM</span>
                            </div>
                            <div class="schedule-row">
                                <span class="day">Domingos</span>
                                <span class="time">8:00 AM</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="event-card">
                    <div class="event-date">
                        <span class="day">01</span>
                        <span class="month">SEP</span>
                    </div>
                    <div class="event-content">
                        <h3>Conferencia Familiar</h3>
                        <p>Fortaleciendo los lazos familiares en Cristo</p>
                        <div class="event-time">
                            <i class="fas fa-clock"></i>
                            <span>6:00 PM</span>
                        </div>
                    </div>
                </div>
                <div class="event-card">
                    <div class="event-date">
                        <span class="day">15</span>
                        <span class="month">SEP</span>
                    </div>
                    <div class="event-content">
                        <h3>Retiro Juvenil</h3>
                        <p>Fin de semana de crecimiento para jóvenes</p>
                        <div class="event-time">
                            <i class="fas fa-clock"></i>
                            <span>Todo el día</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Facebook Section -->
    <section id="facebook" class="facebook-section">
        <div class="container">
            <div class="section-header">
                <h2>Síguenos en Facebook</h2>
                <p>Mantente conectado con nuestra comunidad - Todo el contenido aquí mismo</p>
            </div>
            
            <div class="facebook-grid">
                <!-- Facebook Page Plugin with Timeline -->
                <div class="facebook-widget">
                    <h3>Nuestra Página y Publicaciones Recientes</h3>
                    <div class="fb-page" 
                         data-href="https://www.facebook.com/casadeavivamientoyreinocerete" 
                         data-tabs="timeline,events,messages" 
                         data-width="500" 
                         data-height="600" 
                         data-small-header="false" 
                         data-adapt-container-width="true" 
                         data-hide-cover="false" 
                         data-show-facepile="true">
                        <blockquote cite="https://www.facebook.com/casadeavivamientoyreinocerete" class="fb-xfbml-parse-ignore">
                            <a href="https://www.facebook.com/casadeavivamientoyreinocerete">Casa de Avivamiento y Reino cerete</a>
                        </blockquote>
                    </div>
                </div>
                
                <!-- Embedded Facebook Posts -->
                <div class="facebook-posts">
                    <h3>Últimas Publicaciones</h3>
                    <div class="posts-container">
                        <!-- Facebook embedded post plugin will show recent posts -->
                        <div class="fb-social-plugin" 
                             data-href="https://www.facebook.com/casadeavivamientoyreinocerete" 
                             data-width="500">
                        </div>
                        
                        <!-- Alternative: Show recent posts via page plugin -->
                        <div class="recent-posts-info">
                            <div class="post-placeholder">
                                <i class="fab fa-facebook-f"></i>
                                <p>Las publicaciones más recientes de nuestra página aparecerán aquí automáticamente</p>
                                <small>Incluyendo fotos, videos, eventos y transmisiones en vivo</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Facebook Live Videos -->
                <div class="facebook-live">
                    <h3>Videos y Transmisiones</h3>
                    <div class="fb-video" 
                         data-href="https://www.facebook.com/casadeavivamientoyreinocerete/videos" 
                         data-width="500" 
                         data-show-text="true">
                    </div>
                    <div class="live-info">
                        <div class="live-placeholder">
                            <i class="fas fa-video"></i>
                            <p>Videos recientes y transmisiones en vivo</p>
                            <small>Servicios, testimonios y eventos especiales</small>
                        </div>
                    </div>
                </div>
                
                <!-- Facebook Events -->
                <div class="facebook-events">
                    <h3>Próximos Eventos</h3>
                    <div class="events-container">
                        <div class="event-placeholder">
                            <i class="fas fa-calendar-alt"></i>
                            <p>Eventos próximos de nuestra comunidad</p>
                            <div class="service-schedule">
                                <h4>Horarios de Servicios:</h4>
                                <ul>
                                    <li><strong>Martes 7:00 PM</strong> - Discipulado del Reino</li>
                                    <li><strong>Jueves 7:00 PM</strong> - Servicio</li>
                                    <li><strong>Sábado 7:00 PM</strong> - Reunión de Jóvenes</li>
                                    <li><strong>Domingo 8:00 AM</strong> - Servicio</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Custom Comments System -->
                <div class="custom-comments">
                    <h3>Comentarios de la Comunidad</h3>
                    
                    <!-- Admin Login Section -->
                    <div id="admin-section" class="admin-section">
                        <button id="admin-toggle" class="admin-toggle">🔐 Acceso Administrador</button>
                        <div id="admin-login" class="admin-login hidden">
                            <input type="password" id="admin-password" placeholder="Contraseña de administrador" class="admin-input">
                            <button id="admin-login-btn" class="admin-btn">Entrar</button>
                            <button id="admin-logout-btn" class="admin-btn hidden">Cerrar Sesión</button>
                        </div>
                    </div>
                    
                    <!-- Comment Form -->
                    <div class="comment-form">
                        <h4>Deja tu comentario</h4>
                        <form id="comment-form">
                            <div class="form-group">
                                <input type="text" id="comment-name" placeholder="Tu nombre" required class="form-input">
                            </div>
                            <div class="form-group">
                                <input type="email" id="comment-email" placeholder="Tu email (opcional)" class="form-input">
                            </div>
                            <div class="form-group">
                                <textarea id="comment-text" placeholder="Escribe tu comentario aquí..." required class="form-textarea"></textarea>
                            </div>
                            <button type="submit" class="comment-submit-btn">
                                <i class="fas fa-paper-plane"></i> Publicar Comentario
                            </button>
                        </form>
                    </div>
                    
                    <!-- Comments Display -->
                    <div class="comments-display">
                        <h4 id="comments-count">Comentarios (0)</h4>
                        <div id="comments-list" class="comments-list">
                            <!-- Comments will be dynamically added here -->
                        </div>
                        <div id="no-comments" class="no-comments">
                            <i class="fas fa-comments"></i>
                            <p>¡Sé el primero en comentar!</p>
                        </div>
                    </div>
                </div>
                
                <!-- Facebook Like Button -->
                <div class="facebook-interactions">
                    <h3>Interactúa con Nosotros</h3>
                    <div class="interaction-buttons">
                        <div class="fb-like" 
                             data-href="https://www.facebook.com/casadeavivamientoyreinocerete" 
                             data-width="300" 
                             data-layout="standard" 
                             data-action="like" 
                             data-size="large" 
                             data-share="true">
                        </div>
                        
                        <div class="fb-follow" 
                             data-href="https://www.facebook.com/casadeavivamientoyreinocerete" 
                             data-width="300" 
                             data-layout="standard" 
                             data-size="large">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contacto" class="contact">
        <div class="container">
            <div class="section-header">
                <h2>Contáctanos</h2>
                <p>Estamos aquí para servirte y acompañarte</p>
            </div>
            <div class="contact-grid">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Dirección</h3>
                            <p>Cerete, Córdoba, Colombia</p>
                            <a href="https://maps.app.goo.gl/Sqohyuc9YkAKCstG6" target="_blank" class="map-link">
                                <i class="fas fa-external-link-alt"></i> Ver en Google Maps
                            </a>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Teléfono</h3>
                            <p>+57 123 456 7890</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Email</h3>
                            <p><a href="mailto:luismarkministerio@gmail.com">luismarkministerio@gmail.com</a></p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Horarios de Servicio</h3>
                            <div class="schedule-simple">
                                <div class="schedule-row">
                                    <span class="day">Martes</span>
                                    <span class="time">7:00 PM</span>
                                </div>
                                <div class="schedule-row">
                                    <span class="day">Jueves</span>
                                    <span class="time">7:00 PM</span>
                                </div>
                                <div class="schedule-row">
                                    <span class="day">Sábado</span>
                                    <span class="time">7:00 PM</span>
                                </div>
                                <div class="schedule-row">
                                    <span class="day">Domingo</span>
                                    <span class="time">8:00 AM</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="contact-form">
                    <form id="contact-form">
                        <div class="form-group">
                            <input type="text" name="from_name" placeholder="Tu nombre" required>
                        </div>
                        <div class="form-group">
                            <input type="email" name="from_email" placeholder="Tu email" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" name="phone" placeholder="Tu teléfono">
                        </div>
                        <div class="form-group">
                            <textarea name="message" placeholder="Tu mensaje" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            <i class="fas fa-paper-plane"></i> Enviar Mensaje
                        </button>
                    </form>
                    
                    <!-- Success/Error Messages -->
                    <div id="form-status" class="form-status" style="display: none;">
                        <div id="success-message" class="success-message" style="display: none;">
                            <i class="fas fa-check-circle"></i>
                            <h4>¡Mensaje enviado exitosamente!</h4>
                            <p>Gracias por contactarnos. Te responderemos pronto.</p>
                        </div>
                        <div id="error-message" class="error-message" style="display: none;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h4>Error al enviar el mensaje</h4>
                            <p>Por favor, intenta nuevamente o contáctanos directamente.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-church"></i>
                    <span>Casa de Avivamiento y Reino</span>
                </div>
                <div class="footer-social">
                    <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Casa de Avivamiento y Reino Cerete. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    
    <!-- EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    
    <!-- Facebook SDK -->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v18.0"></script>
    
    <script>
        // Facebook SDK initialization
        window.fbAsyncInit = function() {
            FB.init({
                appId: '', // Add your Facebook App ID here
                cookie: true,
                xfbml: true,
                version: 'v18.0'
            });
            
            FB.AppEvents.logPageView();
        };
        
        // Facebook share function
        function shareOnFacebook(url, title) {
            FB.ui({
                method: 'share',
                href: url || window.location.href,
                quote: title || 'Casa de Avivamiento y Reino Cerete - Un lugar donde experimentarás el amor de Dios'
            }, function(response){});
        }
        
        // Contact Form Handler with Mailto Fallback
        (function() {
            const contactForm = document.getElementById('contact-form');
            const submitBtn = document.getElementById('submit-btn');
            const formStatus = document.getElementById('form-status');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');
            
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Get form data
                    const formData = new FormData(contactForm);
                    const name = formData.get('from_name');
                    const email = formData.get('from_email');
                    const phone = formData.get('phone') || 'No proporcionado';
                    const message = formData.get('message');
                    
                    // Create email content
                    const subject = encodeURIComponent('Nuevo mensaje de contacto - Casa de Avivamiento');
                    const body = encodeURIComponent(
                        `Nombre: ${name}\n` +
                        `Email: ${email}\n` +
                        `Teléfono: ${phone}\n\n` +
                        `Mensaje:\n${message}\n\n` +
                        `---\n` +
                        `Este mensaje fue enviado desde el formulario de contacto de Casa de Avivamiento y Reino Cerete.`
                    );
                    
                    // Create mailto link
                    const mailtoLink = `mailto:studiootaku6@gmail.com?subject=${subject}&body=${body}`;
                    
                    // Show loading state briefly
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Abriendo email...';
                    submitBtn.disabled = true;
                    
                    // Open email client
                    setTimeout(function() {
                        window.location.href = mailtoLink;
                        
                        // Show success message
                        showSuccessMessage();
                        contactForm.reset();
                        
                        // Reset button
                        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Enviar Mensaje';
                        submitBtn.disabled = false;
                    }, 1000);
                });
            }
            
            function showSuccessMessage() {
                formStatus.style.display = 'block';
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                
                // Update success message for mailto
                successMessage.innerHTML = `
                    <i class="fas fa-envelope-open"></i>
                    <h4>¡Email preparado!</h4>
                    <p>Se ha abierto tu cliente de email con el mensaje listo para enviar a studiootaku6@gmail.com</p>
                `;
                
                // Hide after 8 seconds
                setTimeout(function() {
                    formStatus.style.display = 'none';
                }, 8000);
            }
        })();

        // Custom Comments System
        (function() {
            // Admin password (change this to your desired password)
            const ADMIN_PASSWORD = 'admin2025';
            let isAdminLoggedIn = false;
            let comments = JSON.parse(localStorage.getItem('churchComments')) || [];

            // DOM Elements
            const adminToggle = document.getElementById('admin-toggle');
            const adminLogin = document.getElementById('admin-login');
            const adminPasswordInput = document.getElementById('admin-password');
            const adminLoginBtn = document.getElementById('admin-login-btn');
            const adminLogoutBtn = document.getElementById('admin-logout-btn');
            const adminSection = document.getElementById('admin-section');
            const commentForm = document.getElementById('comment-form');
            const commentsList = document.getElementById('comments-list');
            const commentsCount = document.getElementById('comments-count');
            const noComments = document.getElementById('no-comments');

            // Initialize
            init();

            function init() {
                setupEventListeners();
                renderComments();
                updateCommentsCount();
            }

            function setupEventListeners() {
                // Admin toggle
                adminToggle.addEventListener('click', function() {
                    adminLogin.classList.toggle('hidden');
                });

                // Admin login
                adminLoginBtn.addEventListener('click', handleAdminLogin);
                adminPasswordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        handleAdminLogin();
                    }
                });

                // Admin logout
                adminLogoutBtn.addEventListener('click', handleAdminLogout);

                // Comment form
                commentForm.addEventListener('submit', handleCommentSubmit);
            }

            function handleAdminLogin() {
                const password = adminPasswordInput.value.trim();
                
                if (password === ADMIN_PASSWORD) {
                    isAdminLoggedIn = true;
                    adminSection.classList.add('admin-logged-in');
                    adminLogin.classList.add('hidden');
                    adminLogoutBtn.classList.remove('hidden');
                    adminToggle.innerHTML = '✅ Administrador Conectado';
                    adminToggle.style.background = '#10b981';
                    adminPasswordInput.value = '';
                    
                    // Show success message
                    showNotification('¡Bienvenido Administrador!', 'success');
                    
                    // Re-render comments to show delete buttons
                    renderComments();
                } else {
                    showNotification('Contraseña incorrecta', 'error');
                    adminPasswordInput.value = '';
                }
            }

            function handleAdminLogout() {
                isAdminLoggedIn = false;
                adminSection.classList.remove('admin-logged-in');
                adminLogoutBtn.classList.add('hidden');
                adminToggle.innerHTML = '🔐 Acceso Administrador';
                adminToggle.style.background = '#1877f2';
                
                showNotification('Sesión de administrador cerrada', 'info');
                
                // Re-render comments to hide delete buttons
                renderComments();
            }

            function handleCommentSubmit(e) {
                e.preventDefault();
                
                const name = document.getElementById('comment-name').value.trim();
                const email = document.getElementById('comment-email').value.trim();
                const text = document.getElementById('comment-text').value.trim();
                
                if (!name || !text) {
                    showNotification('Por favor completa todos los campos requeridos', 'error');
                    return;
                }

                // Create new comment
                const newComment = {
                    id: Date.now().toString(),
                    name: name,
                    email: email,
                    text: text,
                    date: new Date().toLocaleString('es-ES', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                };

                // Add to comments array
                comments.unshift(newComment); // Add to beginning
                
                // Save to localStorage
                localStorage.setItem('churchComments', JSON.stringify(comments));
                
                // Reset form
                commentForm.reset();
                
                // Re-render comments
                renderComments();
                updateCommentsCount();
                
                // Show success message
                showNotification('¡Comentario publicado exitosamente!', 'success');
                
                // Scroll to comments
                document.getElementById('comments-list').scrollIntoView({ behavior: 'smooth' });
            }

            function renderComments() {
                if (comments.length === 0) {
                    commentsList.innerHTML = '';
                    noComments.style.display = 'block';
                    return;
                }

                noComments.style.display = 'none';
                
                commentsList.innerHTML = comments.map(comment => `
                    <div class="comment-item" data-comment-id="${comment.id}">
                        <div class="comment-header">
                            <div>
                                <div class="comment-author">${escapeHtml(comment.name)}</div>
                                <div class="comment-date">${comment.date}</div>
                            </div>
                            ${isAdminLoggedIn ? `
                                <div class="comment-actions">
                                    <button class="delete-comment-btn" onclick="deleteComment('${comment.id}')">
                                        <i class="fas fa-trash"></i> Eliminar
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                        <div class="comment-content">${escapeHtml(comment.text)}</div>
                    </div>
                `).join('');
            }

            function deleteComment(commentId) {
                if (!isAdminLoggedIn) {
                    showNotification('Solo el administrador puede eliminar comentarios', 'error');
                    return;
                }

                if (confirm('¿Estás seguro de que quieres eliminar este comentario?')) {
                    // Remove from array
                    comments = comments.filter(comment => comment.id !== commentId);
                    
                    // Save to localStorage
                    localStorage.setItem('churchComments', JSON.stringify(comments));
                    
                    // Re-render
                    renderComments();
                    updateCommentsCount();
                    
                    showNotification('Comentario eliminado', 'info');
                }
            }

            function updateCommentsCount() {
                const count = comments.length;
                commentsCount.textContent = `Comentarios (${count})`;
            }

            function showNotification(message, type = 'info') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <div class="notification-content">
                        <i class="fas ${getNotificationIcon(type)}"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                // Add styles
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${getNotificationColor(type)};
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                    z-index: 10000;
                    transform: translateX(100%);
                    transition: transform 0.3s ease;
                    max-width: 300px;
                `;
                
                document.body.appendChild(notification);
                
                // Animate in
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 100);
                
                // Remove after 4 seconds
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 4000);
            }

            function getNotificationIcon(type) {
                switch(type) {
                    case 'success': return 'fa-check-circle';
                    case 'error': return 'fa-exclamation-circle';
                    case 'info': return 'fa-info-circle';
                    default: return 'fa-info-circle';
                }
            }

            function getNotificationColor(type) {
                switch(type) {
                    case 'success': return '#10b981';
                    case 'error': return '#ef4444';
                    case 'info': return '#3b82f6';
                    default: return '#6b7280';
                }
            }

            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // Make deleteComment available globally
            window.deleteComment = deleteComment;
        })();
    </script>
</body>
</html>
